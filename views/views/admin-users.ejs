<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin - Users</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Manage Users</h1>
      <a href="/admin/dashboard" class="btn">Back</a>
    </header>

    <div class="card">
      <a href="/admin/users/new" class="btn">Create New User</a>
      <table class="table" style="margin-top:12px">
        <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Actions</th></tr></thead>
        <tbody>
          <% users.forEach(u => { %>
            <tr>
              <td><%= u.name %></td>
              <td><%= u.email %></td>
              <td><%= u.role %></td>
              <td>
                <form method="POST" action="/admin/users/<%= u._id %>/role" style="display:inline">
                  <select name="role">
                    <option value="student" <%= u.role==='student'?'selected':'' %>>Student</option>
                    <option value="officer" <%= u.role==='officer'?'selected':'' %>>Officer</option>
                    <option value="admin" <%= u.role==='admin'?'selected':'' %>>Admin</option>
                  </select>
                  <button class="btn">Change</button>
                </form>

                <form method="POST" action="/admin/users/<%= u._id %>/delete" style="display:inline" onsubmit="return confirm('Delete user?')">
                  <button class="btn" style="background:#e74c3c;color:#fff">Delete</button>
                </form>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
